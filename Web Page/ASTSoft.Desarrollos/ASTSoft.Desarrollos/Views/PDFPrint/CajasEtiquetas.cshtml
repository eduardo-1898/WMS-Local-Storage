@model List<Services.Messaging.ViewModels.Datamatrix.ArticuloInfo>

@{
    ViewData["Title"] = "CajasEtiquetas";
    Layout = null;
}

<style>
    .sideInfo {
/*         -webkit-transform: rotate(-90deg);
        -moz-transform: rotate(-90deg); */
        text-align: center;
    }

    .inline-block {
        display: -moz-inline-stack;
        display: inline-block;
        zoom: 1;
        *display: inline;
    }
</style>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>

<div>
    @foreach (var item in Model)
    {
        @*<div>*@
        <div class="text-center">
            <table width="100%" style="border: solid white; height:100%; font-size: 25px;">
                <thead>
                    <tr class="text-center" style="page-break-inside: avoid">
                        <th colspan="4" class="text-center">
                            @{
                                string imgSrc = string.Format("data:image/png;base64,{0}", item.Qr);
                                <img src="@imgSrc" style="height:100px; width:100px;" />
                            }
                        </th>
                    </tr>
                </thead>

                <tbody>
                    @{
                        var cantidadLineas = 0;
                    }
                    @if (item.articuloDetalle.Length <= 30)
                    {
                        cantidadLineas = 1;

                    }
                    else if (item.articuloDetalle.Length <= 60)
                    {
                        cantidadLineas = 2;
                    }
                    else if (item.articuloDetalle.Length <= 90)
                    {
                        cantidadLineas = 3;
                    } else
                    {
                        cantidadLineas = 3;
                    }
                    <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>Codigo: @item.articulo</strong></td>
                    </tr>
                    <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle</strong></td>
                    </tr>
                    <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>Lote: @item.lote</strong></td>
                    </tr>
                    <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>Fecha Vencimiento: @item.fechaVencimiento.ToString("dd/MM/yyyy")</strong></td>
                    </tr>
                    <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="2" class="text-center" style="page-break-inside: avoid;margin-left:200px;"><strong> Cantidad completa: @item.cantidad</strong></td>
                    </tr>
@*                     <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>Cantidad completa: @item.cantidad</strong></td>
                    </tr> *@
                    <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>Revisado por: @item.usuario</strong></td>
                    </tr>
                    <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>Generado el: @DateTime.Now.ToString("dd/MM/yyyy HH:mm") </strong></td>
                    </tr>
                    <tr class="text-center" style="page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>Rango Datamatrix: @item.consecutivos </strong></td>
                    </tr>
@*                     @if (cantidadLineas == 1)
                    {
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle</strong></td>
                        </tr>
                    }
                    @if (cantidadLineas == 2)
                    {
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(0, 30)</strong></td>
                        </tr>
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(30)</strong></td>
                        </tr>
                    }
                    @if (cantidadLineas == 3 && item.articuloDetalle.Length <= 90)
                    {
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(0, 30)</strong></td>
                        </tr>
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(30, 30)</strong></td>
                        </tr>
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(60)</strong></td>
                        </tr>
                    }
                    @if (cantidadLineas == 3 && item.articuloDetalle.Length > 90)
                    {
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(0, 30)</strong></td>
                        </tr>
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(30, 30)</strong></td>
                        </tr>
                        <tr class="text-center" style="font-size: 20px;page-break-inside: avoid">
                            <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(60, 30)</strong></td>
                        </tr>
                    }
 *@
                    @* <tr class="text-center" style="font-size: 16px;page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(0, 30)</strong> </td>
                    </tr>
                    <tr class="text-center" style="font-size: 16px;page-break-inside: avoid">
                        <td colspan="4" class="text-center" style="page-break-inside: avoid"><strong>@item.articuloDetalle.Substring(0, 30)</strong> </td>
                    </tr> *@
                </tbody>
            </table>
        </div>
        @*</div>*@
    }
</div>
